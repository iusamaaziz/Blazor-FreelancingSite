<h3 class="my-2">Manage Categories</h3>
<hr />
<a @onclick="@((_)=> { show = true; })" class="btn btn-primary my-2">Add Category</a>
<CategoryForm show="@show" click="@((_)=> { show = false; })" category="@cat"  onsubmit="@((category)=> { AddCategory(category); })"></CategoryForm>
<div class="row">
    @foreach (Category cat in categories)
    {
        <CategoryCard category="@cat" isAdmin="@true" UpdateEvent="@((c) => { UpdateBtnClick(c); })" DeleteEvent="DeleteCategory"></CategoryCard>
    }
</div>
@code{
    bool show=false;
    List<Category> categories;
    Category cat = new Category();
    public void AddCategory(Category category)
    {
        if (category.ID == 0)
            categories.Add(new Category { ID = category.ID, Slug = category.Slug, Image = category.Image, ImageUrl = category.ImageUrl, Name = category.Name });
        else
        {
            for(int i = 0;i<categories.Count; i++)
            {
                if(categories[i].ID == category.ID)
                {
                    categories[i] = new Category { Name = category.Name, ImageUrl = category.ImageUrl, Slug = category.Slug, ID = category.ID };
                    break;
                }
            }
        }
        cat = new Category();
        show = false;
    }
    public void DeleteCategory(Category category)
    {
        categories.Remove(category);
    }
    public void UpdateBtnClick(Category category)
    {
        show = true;
        cat = new Category { Name = category.Name, ImageUrl = category.ImageUrl, Slug = category.Slug, ID = category.ID };
    }
    protected override void OnInitialized()
    {
        categories = new List<Category>();
        categories.Add(new Category { ID = 1, ImageUrl = "download.jpg", Name = "name", Slug = "name" });
        categories.Add(new Category { ID = 2, ImageUrl = "download.jpg", Name = "name", Slug = "name" });
        categories.Add(new Category { ID = 3, ImageUrl = "download.jpg", Name = "name", Slug = "name" });
        categories.Add(new Category { ID = 4, ImageUrl = "download.jpg", Name = "name", Slug = "name" });
        categories.Add(new Category { ID = 5, ImageUrl = "download.jpg", Name = "name", Slug = "name" });
        categories.Add(new Category { ID = 6, ImageUrl = "download.jpg", Name = "name", Slug = "name" });
        base.OnInitialized();
    }
}